<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record model="ir.ui.view" id="view_purchase_request_line_pivot">
        <field name="name">Purchase Request Report pivot</field>
        <field name="model">purchase.request.line</field>
        <field name="arch" type="xml">
            <pivot string="Purchase Request Lines" display_quantity="True">
                <field name="product_id" type="row"/>
                <field name="product_qty" type="measure"/>
            </pivot>
        </field>
    </record>

    <record id="action_purchase_request_line_report" model="ir.actions.act_window">
        <field name="name">Purchase Request Report</field>
        <field name="res_model">purchase.request.line</field>
        <field name="view_id" ref="view_purchase_request_line_pivot"/>
        <field name="view_mode">pivot,tree,graph</field>
    </record>

    <record id="action_incomplete_purchase_request_line_report" model="ir.actions.server">
        <field name="name">Incomplete Purchase Request Report</field>
        <field name="type">ir.actions.server</field>
        <field name="model_id" ref="purchase_request.model_purchase_request_line"/>
        <field name="state">code</field>
        <field name="code">
            action = model.incomplete_purchase_request_line_report()
        </field>
    </record>

    <menuitem
            id="menu_purchase_request_report"
            name="Reporting"
            parent="purchase_request.parent_menu_purchase_request"
            groups="purchase_request.group_purchase_request_user,purchase_request.group_purchase_request_manager"
            sequence="11"
    />
    <menuitem id="menu_action_incomplete_purchase_report_line"
              action="action_incomplete_purchase_request_line_report"
              parent="menu_purchase_request_report"
              sequence="2"/>

    <menuitem id="menu_action_purchase_report_line"
              action="action_purchase_request_line_report"
              parent="menu_purchase_request_report"
              sequence="3"/>

</odoo>
